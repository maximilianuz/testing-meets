<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coordinador de Reuniones Internacional</title>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #e7f0f7;
      padding: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #1a1a1a;
    }
    form {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    label {
      font-weight: 600;
      display: block;
      margin-top: 15px;
    }
    input, textarea, select {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }
    textarea {
      resize: vertical;
      height: 100px;
    }
    button {
      background: #007bff;
      color: white;
      padding: 12px 18px;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      background: #0056b3;
    }
    #preview {
      margin-top: 30px;
      padding: 20px;
      background: #f1f9ff;
      border-left: 4px solid #007bff;
      border-radius: 8px;
      white-space: pre-wrap;
    }
    .share-buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      max-width: 800px;
      margin-inline: auto;
    }
    .share-buttons button {
      flex: 1;
    }
    @media (max-width: 768px) {
      form, .share-buttons {
        padding: 20px;
        width: 100%;
      }
      .share-buttons {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <h1>Coordinador de Reuniones Internacional üåê</h1>
  <form id="meeting-form">
    <label>Nombre de la Empresa o Persona</label>
    <input type="text" id="nombre" required />

    <label>T√≠tulo de la Reuni√≥n</label>
    <input type="text" id="titulo" style="text-transform: uppercase; font-weight: bold;" required />

    <label>Comentarios</label>
    <textarea id="comentarios" required></textarea>

    <label>Link de la Reuni√≥n</label>
    <input type="url" id="link" placeholder="https://meet.google.com/..." required />

    <label>Saludo de Despedida</label>
    <input type="text" id="saludo" required />

    <label>Fecha de la Reuni√≥n</label>
    <input type="date" id="fecha" required />

    <label>Hora de la Reuni√≥n</label>
    <input type="time" id="hora" required />

    <label>Seleccion√° los pa√≠ses participantes</label>
    <select id="paises" multiple size="10" required></select>

    <button type="button" onclick="generarMensaje()">Generar y Compartir</button>
  </form>

  <div id="preview"></div>

  <div class="share-buttons">
    <button onclick="copiarMensaje()">üìã Copiar</button>
    <button onclick="compartirWhatsApp()">üü¢ WhatsApp</button>
    <button onclick="compartirTelegram()">üîµ Telegram</button>
  </div>

  <script>
    const regiones = {
      "Latinoam√©rica": [
        ["Argentina", "üá¶üá∑", "America/Argentina/Buenos_Aires"],
        ["M√©xico", "üá≤üáΩ", "America/Mexico_City"],
        ["Colombia", "üá®üá¥", "America/Bogota"],
        ["Chile", "üá®üá±", "America/Santiago"],
        ["Per√∫", "üáµüá™", "America/Lima"],
        ["Uruguay", "üá∫üáæ", "America/Montevideo"],
        ["Paraguay", "üáµüáæ", "America/Asuncion"],
        ["Bolivia", "üáßüá¥", "America/La_Paz"],
        ["Ecuador", "üá™üá®", "America/Guayaquil"],
        ["Venezuela", "üáªüá™", "America/Caracas"],
        ["Cuba", "üá®üá∫", "America/Havana"],
        ["Rep. Dominicana", "üá©üá¥", "America/Santo_Domingo"]
      ],
      "Am√©rica del Norte": [
        ["Estados Unidos (EST)", "üá∫üá∏", "America/New_York"],
        ["Estados Unidos (PST)", "üá∫üá∏", "America/Los_Angeles"],
        ["Canad√° (Toronto)", "üá®üá¶", "America/Toronto"],
        ["Canad√° (Vancouver)", "üá®üá¶", "America/Vancouver"]
      ],
      "Europa": [
        ["Espa√±a", "üá™üá∏", "Europe/Madrid"],
        ["Francia", "üá´üá∑", "Europe/Paris"],
        ["Alemania", "üá©üá™", "Europe/Berlin"],
        ["Italia", "üáÆüáπ", "Europe/Rome"],
        ["Reino Unido", "üá¨üáß", "Europe/London"],
        ["Pa√≠ses Bajos", "üá≥üá±", "Europe/Amsterdam"],
        ["Portugal", "üáµüáπ", "Europe/Lisbon"],
        ["Suecia", "üá∏üá™", "Europe/Stockholm"],
        ["Noruega", "üá≥üá¥", "Europe/Oslo"]
      ],
      "√Åfrica": [
        ["Sud√°frica", "üáøüá¶", "Africa/Johannesburg"],
        ["Egipto", "üá™üá¨", "Africa/Cairo"],
        ["Nigeria", "üá≥üá¨", "Africa/Lagos"],
        ["Kenia", "üá∞üá™", "Africa/Nairobi"],
        ["Marruecos", "üá≤üá¶", "Africa/Casablanca"]
      ],
      "Asia": [
        ["China", "üá®üá≥", "Asia/Shanghai"],
        ["India", "üáÆüá≥", "Asia/Kolkata"],
        ["Jap√≥n", "üáØüáµ", "Asia/Tokyo"],
        ["Corea del Sur", "üá∞üá∑", "Asia/Seoul"],
        ["Tailandia", "üáπüá≠", "Asia/Bangkok"],
        ["Indonesia", "üáÆüá©", "Asia/Jakarta"],
        ["Emiratos √Årabes", "üá¶üá™", "Asia/Dubai"]
      ],
      "Ocean√≠a": [
        ["Australia (Sydney)", "üá¶üá∫", "Australia/Sydney"],
        ["Australia (Perth)", "üá¶üá∫", "Australia/Perth"],
        ["Nueva Zelanda", "üá≥üáø", "Pacific/Auckland"],
        ["Fiyi", "üá´üáØ", "Pacific/Fiji"]
      ]
    };

    // Generar opciones en el selector
    const selector = document.getElementById("paises");
    Object.entries(regiones).forEach(([region, paises]) => {
      const optgroup = document.createElement("optgroup");
      optgroup.label = region;
      paises.forEach(([nombre, bandera, zona]) => {
        const option = document.createElement("option");
        option.value = `${nombre}|${bandera}|${zona}|${region}`;
        option.textContent = `${bandera} ${nombre}`;
        optgroup.appendChild(option);
      });
      selector.appendChild(optgroup);
    });

    function generarMensaje() {
      const DateTime = luxon.DateTime;
      const nombre = document.getElementById("nombre").value;
      const titulo = document.getElementById("titulo").value.toUpperCase();
      const comentarios = document.getElementById("comentarios").value;
      const saludo = document.getElementById("saludo").value;
      const link = document.getElementById("link").value;
      const fecha = document.getElementById("fecha").value;
      const hora = document.getElementById("hora").value;

      const seleccion = Array.from(document.getElementById("paises").selectedOptions)
        .map(opt => opt.value.split("|"));

      const dtOriginal = DateTime.fromISO(`${fecha}T${hora}`, { zone: 'local' });
      let porRegion = {};
      seleccion.forEach(([nombre, bandera, zona, region]) => {
        if (!porRegion[region]) porRegion[region] = [];
        const local = dtOriginal.setZone(zona);
        porRegion[region].push(`${bandera} ${nombre} ‚è∞ ${local.toFormat("HH:mm")} (${local.toFormat("hh:mm a")})`);
      });

      let horarios = "üïí Horarios Internacionales:\n\n";
      Object.entries(porRegion).forEach(([region, paises]) => {
        horarios += `üåç ${region}\n`;
        paises.forEach(p => horarios += p + "\n");
        horarios += "\n";
      });

      const mensaje = `üìå *${titulo}*\nüë§ Organiza: ${nombre}\nüìù ${comentarios}\nüìÖ Fecha: ${fecha}\nüïê Hora: ${hora} (hora local)\nüîó Enlace: ${link}\n\n${horarios}üí¨ ${saludo}`;
      document.getElementById("preview").innerText = mensaje;
    }

    function copiarMensaje() {
      navigator.clipboard.writeText(document.getElementById("preview").innerText)
        .then(() => alert("Mensaje copiado al portapapeles."));
    }

    function compartirWhatsApp() {
      const texto = encodeURIComponent(document.getElementById("preview").innerText);
      window.open(`https://wa.me/?text=${texto}`, '_blank');
    }

    function compartirTelegram() {
      const texto = encodeURIComponent(document.getElementById("preview").innerText);
      window.open(`https://t.me/share/url?text=${texto}`, '_blank');
    }
  </script>
</body>
</html>
