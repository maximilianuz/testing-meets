<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coordinador de Reuniones Multizona</title>
  <style>
    :root {
      color-scheme: light dark;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      color: #222;
      padding: 20px;
      transition: background-color 0.3s, color 0.3s;
    }

    @media (prefers-color-scheme: dark) {
      body {
        background-color: #121212;
        color: #f9f9f9;
      }

      textarea, input, select {
        background-color: #1e1e1e;
        color: #f9f9f9;
        border: 1px solid #444;
      }

      button {
        background-color: #333;
        color: white;
      }
    }

    h1 {
      text-align: center;
    }

    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }

    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    select[multiple] {
      height: 200px;
    }

    button {
      margin-top: 15px;
      padding: 10px;
      border: none;
      border-radius: 5px;
      background-color: #007bff;
      color: white;
      font-size: 1em;
      cursor: pointer;
    }

    button:hover {
      background-color: #0056b3;
    }

    #output {
      white-space: pre-wrap;
      background-color: #eee;
      padding: 15px;
      border-radius: 5px;
      margin-top: 20px;
    }

    .region-optgroup {
      font-weight: bold;
    }

    .share-buttons {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .license {
      margin-top: 30px;
      font-size: 0.9em;
      text-align: center;
    }

    .license a {
      color: inherit;
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1 id="title">Coordinador de Reuniones Multizona</h1>

  <label for="company" id="companyLabel">Empresa</label>
  <input type="text" id="company" placeholder="Nombre de la empresa" />

  <label for="meetingTitle" id="meetingTitleLabel">TÃ­tulo de la reuniÃ³n</label>
  <input type="text" id="meetingTitle" placeholder="Ej: ReuniÃ³n EstratÃ©gica" oninput="toUpperBold()" />

  <label for="description" id="descriptionLabel">DescripciÃ³n</label>
  <input type="text" id="description" placeholder="DescripciÃ³n breve de la reuniÃ³n" />

  <label for="hostDateTime" id="hostDateTimeLabel">Fecha y hora del anfitriÃ³n</label>
  <input type="datetime-local" id="hostDateTime" />

  <label for="hostCountry" id="hostCountryLabel">PaÃ­s del anfitriÃ³n</label>
  <select id="hostCountry"></select>

  <label for="link" id="linkLabel">Enlace a la videollamada</label>
  <input type="url" id="link" placeholder="https://..." />

  <label for="countries" id="countriesLabel">Selecciona los paÃ­ses</label>
  <input type="text" id="searchCountry" placeholder="Buscar paÃ­s..." oninput="filterCountries()" />
  <select id="countries" multiple></select>

  <label for="farewell" id="farewellLabel">Mensaje de despedida</label>
  <input type="text" id="farewell" placeholder="Â¡Los esperamos!" />

  <button onclick="generateMessage()" id="generateButton">Generar Mensaje</button>

  <div id="output"></div>

  <div class="share-buttons">
    <button onclick="copyToClipboard()">ğŸ“‹ Copiar</button>
    <button onclick="share('whatsapp')">ğŸ“± WhatsApp</button>
    <button onclick="share('telegram')">âœˆï¸ Telegram</button>
    <button onclick="share('discord')">ğŸ’¬ Discord</button>
  </div>

  <div class="license">
    Â© 2025 - Herramienta desarrollada por el autor bajo <a href="https://creativecommons.org/licenses/by/4.0/deed.es" target="_blank">Licencia Creative Commons AtribuciÃ³n 4.0 Internacional (CC BY 4.0)</a>.
  </div>

  <script>
    const countries = {
      "LatinoamÃ©rica": [
        { name: "Argentina", tz: "America/Argentina/Buenos_Aires", emoji: "ğŸ‡¦ğŸ‡·" },
        { name: "Bolivia", tz: "America/La_Paz", emoji: "ğŸ‡§ğŸ‡´" },
        { name: "Brasil", tz: "America/Sao_Paulo", emoji: "ğŸ‡§ğŸ‡·" },
        { name: "Chile", tz: "America/Santiago", emoji: "ğŸ‡¨ğŸ‡±" },
        { name: "Colombia", tz: "America/Bogota", emoji: "ğŸ‡¨ğŸ‡´" },
        { name: "Costa Rica", tz: "America/Costa_Rica", emoji: "ğŸ‡¨ğŸ‡·" },
        { name: "Cuba", tz: "America/Havana", emoji: "ğŸ‡¨ğŸ‡º" },
        { name: "Ecuador", tz: "America/Guayaquil", emoji: "ğŸ‡ªğŸ‡¨" },
        { name: "El Salvador", tz: "America/El_Salvador", emoji: "ğŸ‡¸ğŸ‡»" },
        { name: "Guatemala", tz: "America/Guatemala", emoji: "ğŸ‡¬ğŸ‡¹" },
        { name: "Honduras", tz: "America/Tegucigalpa", emoji: "ğŸ‡­ğŸ‡³" },
        { name: "MÃ©xico", tz: "America/Mexico_City", emoji: "ğŸ‡²ğŸ‡½" },
        { name: "Nicaragua", tz: "America/Managua", emoji: "ğŸ‡³ğŸ‡®" },
        { name: "PanamÃ¡", tz: "America/Panama", emoji: "ğŸ‡µğŸ‡¦" },
        { name: "Paraguay", tz: "America/Asuncion", emoji: "ğŸ‡µğŸ‡¾" },
        { name: "PerÃº", tz: "America/Lima", emoji: "ğŸ‡µğŸ‡ª" },
        { name: "RepÃºblica Dominicana", tz: "America/Santo_Domingo", emoji: "ğŸ‡©ğŸ‡´" },
        { name: "Uruguay", tz: "America/Montevideo", emoji: "ğŸ‡ºğŸ‡¾" },
        { name: "Venezuela", tz: "America/Caracas", emoji: "ğŸ‡»ğŸ‡ª" }
      ],
      "NorteamÃ©rica": [
        { name: "CanadÃ¡", tz: "America/Toronto", emoji: "ğŸ‡¨ğŸ‡¦" },
        { name: "Estados Unidos", tz: "America/New_York", emoji: "ğŸ‡ºğŸ‡¸" }
      ],
      "Europa": [
        { name: "Alemania", tz: "Europe/Berlin", emoji: "ğŸ‡©ğŸ‡ª" },
        { name: "EspaÃ±a", tz: "Europe/Madrid", emoji: "ğŸ‡ªğŸ‡¸" },
        { name: "Francia", tz: "Europe/Paris", emoji: "ğŸ‡«ğŸ‡·" },
        { name: "Italia", tz: "Europe/Rome", emoji: "ğŸ‡®ğŸ‡¹" },
        { name: "PaÃ­ses Bajos", tz: "Europe/Amsterdam", emoji: "ğŸ‡³ğŸ‡±" },
        { name: "Portugal", tz: "Europe/Lisbon", emoji: "ğŸ‡µğŸ‡¹" },
        { name: "Reino Unido", tz: "Europe/London", emoji: "ğŸ‡¬ğŸ‡§" },
        { name: "Suiza", tz: "Europe/Zurich", emoji: "ğŸ‡¨ğŸ‡­" }
      ],
      "Asia": [
        { name: "China", tz: "Asia/Shanghai", emoji: "ğŸ‡¨ğŸ‡³" },
        { name: "India", tz: "Asia/Kolkata", emoji: "ğŸ‡®ğŸ‡³" },
        { name: "JapÃ³n", tz: "Asia/Tokyo", emoji: "ğŸ‡¯ğŸ‡µ" },
        { name: "Corea del Sur", tz: "Asia/Seoul", emoji: "ğŸ‡°ğŸ‡·" },
        { name: "Filipinas", tz: "Asia/Manila", emoji: "ğŸ‡µğŸ‡­" },
        { name: "Tailandia", tz: "Asia/Bangkok", emoji: "ğŸ‡¹ğŸ‡­" }
      ],
      "OceanÃ­a": [
        { name: "Australia", tz: "Australia/Sydney", emoji: "ğŸ‡¦ğŸ‡º" },
        { name: "Nueva Zelanda", tz: "Pacific/Auckland", emoji: "ğŸ‡³ğŸ‡¿" }
      ],
      "Ãfrica": [
        { name: "Egipto", tz: "Africa/Cairo", emoji: "ğŸ‡ªğŸ‡¬" },
        { name: "Kenia", tz: "Africa/Nairobi", emoji: "ğŸ‡°ğŸ‡ª" },
        { name: "Marruecos", tz: "Africa/Casablanca", emoji: "ğŸ‡²ğŸ‡¦" },
        { name: "Nigeria", tz: "Africa/Lagos", emoji: "ğŸ‡³ğŸ‡¬" },
        { name: "SudÃ¡frica", tz: "Africa/Johannesburg", emoji: "ğŸ‡¿ğŸ‡¦" }
      ]
    };

    //<script>
  // DetecciÃ³n idioma navegador y traducciÃ³n simple ES/EN
  const lang = navigator.language.startsWith('en') ? 'en' : 'es';

  const translations = {
    es: {
      title: "Coordinador de Reuniones Multizona",
      companyLabel: "Empresa",
      meetingTitleLabel: "TÃ­tulo de la reuniÃ³n",
      descriptionLabel: "DescripciÃ³n",
      hostDateTimeLabel: "Fecha y hora del anfitriÃ³n",
      hostCountryLabel: "PaÃ­s del anfitriÃ³n",
      linkLabel: "Enlace a la videollamada",
      countriesLabel: "Selecciona los paÃ­ses",
      searchPlaceholder: "Buscar paÃ­s...",
      farewellLabel: "Mensaje de despedida",
      generateButton: "Generar Mensaje",
      copyButton: "ğŸ“‹ Copiar",
      whatsappButton: "ğŸ“± WhatsApp",
      telegramButton: "âœˆï¸ Telegram",
      discordButton: "ğŸ’¬ Discord",
      placeholderCompany: "Nombre de la empresa",
      placeholderTitle: "Ej: ReuniÃ³n EstratÃ©gica",
      placeholderDescription: "DescripciÃ³n breve de la reuniÃ³n",
      placeholderLink: "https://...",
      placeholderFarewell: "Â¡Los esperamos!",
      licenseText: "Â© 2025 - Herramienta desarrollada por el autor bajo Licencia Creative Commons AtribuciÃ³n 4.0 Internacional (CC BY 4.0)."
    },
    en: {
      title: "Multi-timezone Meeting Coordinator",
      companyLabel: "Company",
      meetingTitleLabel: "Meeting Title",
      descriptionLabel: "Description",
      hostDateTimeLabel: "Host Date and Time",
      hostCountryLabel: "Host Country",
      linkLabel: "Video Call Link",
      countriesLabel: "Select Countries",
      searchPlaceholder: "Search country...",
      farewellLabel: "Farewell Message",
      generateButton: "Generate Message",
      copyButton: "ğŸ“‹ Copy",
      whatsappButton: "ğŸ“± WhatsApp",
      telegramButton: "âœˆï¸ Telegram",
      discordButton: "ğŸ’¬ Discord",
      placeholderCompany: "Company name",
      placeholderTitle: "Ex: Strategic Meeting",
      placeholderDescription: "Brief description of the meeting",
      placeholderLink: "https://...",
      placeholderFarewell: "Looking forward to seeing you!",
      licenseText: "Â© 2025 - Tool developed by the author under Creative Commons Attribution 4.0 International License (CC BY 4.0)."
    }
  };

  function translateUI() {
    const t = translations[lang];
    document.getElementById('title').textContent = t.title;
    document.getElementById('companyLabel').textContent = t.companyLabel;
    document.getElementById('meetingTitleLabel').textContent = t.meetingTitleLabel;
    document.getElementById('descriptionLabel').textContent = t.descriptionLabel;
    document.getElementById('hostDateTimeLabel').textContent = t.hostDateTimeLabel;
    document.getElementById('hostCountryLabel').textContent = t.hostCountryLabel;
    document.getElementById('linkLabel').textContent = t.linkLabel;
    document.getElementById('countriesLabel').textContent = t.countriesLabel;
    document.getElementById('searchCountry').placeholder = t.searchPlaceholder;
    document.getElementById('farewellLabel').textContent = t.farewellLabel;
    document.getElementById('generateButton').textContent = t.generateButton;

    const shareButtons = document.querySelectorAll('.share-buttons button');
    shareButtons[0].textContent = t.copyButton;
    shareButtons[1].textContent = t.whatsappButton;
    shareButtons[2].textContent = t.telegramButton;
    shareButtons[3].textContent = t.discordButton;

    document.getElementById('company').placeholder = t.placeholderCompany;
    document.getElementById('meetingTitle').placeholder = t.placeholderTitle;
    document.getElementById('description').placeholder = t.placeholderDescription;
    document.getElementById('link').placeholder = t.placeholderLink;
    document.getElementById('farewell').placeholder = t.placeholderFarewell;

    document.querySelector('.license').innerHTML = t.licenseText;
  }

  // Carga paÃ­ses en los select
  function loadCountries() {
    const hostCountrySelect = document.getElementById('hostCountry');
    const countriesSelect = document.getElementById('countries');
    hostCountrySelect.innerHTML = '';
    countriesSelect.innerHTML = '';

    for (const region in countries) {
      // Host country select - opciones simples
      const optgroupHost = document.createElement('optgroup');
      optgroupHost.label = region;
      countries[region].forEach(country => {
        const option = document.createElement('option');
        option.value = country.name;
        option.textContent = `${country.emoji} ${country.name}`;
        optgroupHost.appendChild(option);
      });
      hostCountrySelect.appendChild(optgroupHost);

      // Countries select multiple con optgroups
      const optgroup = document.createElement('optgroup');
      optgroup.label = region;
      countries[region].forEach(country => {
        const option = document.createElement('option');
        option.value = country.name;
        option.textContent = `${country.emoji} ${country.name}`;
        optgroup.appendChild(option);
      });
      countriesSelect.appendChild(optgroup);
    }

    // Por defecto, seleccionar el primer paÃ­s en hostCountry
    if(hostCountrySelect.options.length > 0) {
      hostCountrySelect.selectedIndex = 0;
    }
  }

  // Filtro para buscador de paÃ­ses
  function filterCountries() {
    const filter = document.getElementById('searchCountry').value.toLowerCase();
    const countriesSelect = document.getElementById('countries');
    for (let i = 0; i < countriesSelect.options.length; i++) {
      const option = countriesSelect.options[i];
      option.style.display = option.textContent.toLowerCase().includes(filter) ? '' : 'none';
    }
  }

  // Convierte tÃ­tulo a mayÃºsculas
  function toUpperBold() {
    const input = document.getElementById('meetingTitle');
    input.value = input.value.toUpperCase();
  }

  // Convierte fecha ISO local a Date en UTC para uso de Intl
  function parseLocalDateTimeLocal(inputValue) {
    // inputValue: "YYYY-MM-DDTHH:MM"
    const [date, time] = inputValue.split('T');
    if (!date || !time) return null;
    // Crear objeto Date con zona local
    const [year, month, day] = date.split('-').map(Number);
    const [hour, minute] = time.split(':').map(Number);
    return new Date(year, month - 1, day, hour, minute);
  }

  // Convierte hora del anfitriÃ³n a hora en zona del paÃ­s en formato 12h AM/PM
  function convertToTimeZone(date, timeZone) {
    if (!date) return 'â€”';
    try {
      const options = {
        hour: 'numeric',
        minute: 'numeric',
        hour12: true,
        timeZone: timeZone
      };
      return new Intl.DateTimeFormat(lang === 'es' ? 'es-ES' : 'en-US', options).format(date);
    } catch {
      return 'â€”';
    }
  }

  // Genera mensaje formateado con emojis y regiones agrupadas
  function generateMessage() {
    const company = document.getElementById('company').value.trim();
    const title = document.getElementById('meetingTitle').value.trim().toUpperCase();
    const description = document.getElementById('description').value.trim();
    const hostDateTimeInput = document.getElementById('hostDateTime').value;
    const hostCountry = document.getElementById('hostCountry').value;
    const link = document.getElementById('link').value.trim();
    const farewell = document.getElementById('farewell').value.trim() || (lang === 'es' ? 'Â¡Los esperamos!' : 'Looking forward to seeing you!');
    const selectedCountries = Array.from(document.getElementById('countries').selectedOptions).map(o => o.value);

    if (!title) {
      alert(lang === 'es' ? 'Por favor ingresa el tÃ­tulo de la reuniÃ³n.' : 'Please enter the meeting title.');
      return;
    }
    if (!hostDateTimeInput) {
      alert(lang === 'es' ? 'Por favor selecciona fecha y hora del anfitriÃ³n.' : 'Please select host date and time.');
      return;
    }
    if (!hostCountry) {
      alert(lang === 'es' ? 'Por favor selecciona el paÃ­s del anfitriÃ³n.' : 'Please select the host country.');
      return;
    }
    if (selectedCountries.length === 0) {
      alert(lang === 'es' ? 'Por favor selecciona al menos un paÃ­s para la reuniÃ³n.' : 'Please select at least one country for the meeting.');
      return;
    }

    const hostDate = parseLocalDateTimeLocal(hostDateTimeInput);
    if (!hostDate) {
      alert(lang === 'es' ? 'Fecha y hora invÃ¡lidas.' : 'Invalid date and time.');
      return;
    }

    // Buscar zona horaria anfitriÃ³n
    let hostTz = null;
    outerHost:
    for (const region in countries) {
      for (const c of countries[region]) {
        if (c.name === hostCountry) {
          hostTz = c.tz;
          break outerHost;
        }
      }
    }
    if (!hostTz) {
      alert(lang === 'es' ? 'Zona horaria del paÃ­s anfitriÃ³n no encontrada.' : 'Host country time zone not found.');
      return;
    }

    // Fecha y hora en zona anfitriÃ³n en formato largo
    const hostDateString = new Intl.DateTimeFormat(lang === 'es' ? 'es-ES' : 'en-US', {
      dateStyle: 'full',
      timeStyle: 'short',
      timeZone: hostTz,
      hour12: true
    }).format(hostDate);

    // Construir mensaje
    let message = '';
    if(company) message += `ğŸ¢ ${company}\n`;
    message += `ğŸ“Œ *${title}*\n`;
    if(description) message += `${description}\n`;
    message += (lang === 'es' ? 'ğŸ—“ï¸ Fecha y hora del anfitriÃ³n' : 'ğŸ—“ï¸ Host date and time') + `: ${hostDateString}\n`;
    message += `${lang === 'es' ? 'ğŸŒ PaÃ­s anfitriÃ³n' : 'ğŸŒ Host country'}: ${hostCountry}\n`;
    if(link) message += `${lang === 'es' ? 'ğŸ”— Enlace a la videollamada' : 'ğŸ”— Video call link'}: ${link}\n\n`;

    // Agrupar por regiÃ³n solo los paÃ­ses seleccionados, ordenados alfabÃ©ticamente
    const selectedByRegion = {};
    for (const region in countries) {
      const filtered = countries[region].filter(c => selectedCountries.includes(c.name));
      if (filtered.length > 0) {
        selectedByRegion[region] = filtered.sort((a, b) => a.name.localeCompare(b.name));
      }
    }

    for (const region in selectedByRegion) {
      message += (lang === 'es' ? 'ğŸŒ RegiÃ³n' : 'ğŸŒ Region') + `: ${region}\n`;
      selectedByRegion[region].forEach(c => {
        const time = convertToTimeZone(hostDate, c.tz);
        message += `${c.emoji} ${c.name}: ${time}\n`;
      });
      message += '\n';
    }

    message += farewell;

    // Mostrar mensaje con formato markdown (negritas con *)
    const output = document.getElementById('output');
    output.textContent = message;
  }

  // Copiar texto al portapapeles
  function copyToClipboard() {
    const output = document.getElementById('output').textContent;
    if(!output) return alert(lang === 'es' ? 'No hay mensaje para copiar.' : 'No message to copy.');
    navigator.clipboard.writeText(output).then(() => {
      alert(lang === 'es' ? 'Mensaje copiado al portapapeles.' : 'Message copied to clipboard.');
    });
  }

  // Compartir por plataformas
  function share(platform) {
    const output = document.getElementById('output').textContent;
    if(!output) return alert(lang === 'es' ? 'Genera el mensaje primero.' : 'Generate the message first.');

    let url = '';
    const encodedMessage = encodeURIComponent(output);

    switch(platform) {
      case 'whatsapp':
        url = `https://api.whatsapp.com/send?text=${encodedMessage}`;
        break;
      case 'telegram':
        url = `https://t.me/share/url?url=&text=${encodedMessage}`;
        break;
      case 'discord':
        alert(lang === 'es' ? 'Para compartir en Discord, pega el mensaje directamente en un canal.' : 'To share on Discord, paste the message directly in a channel.');
        return;
      default:
        return;
    }

    window.open(url, '_blank');
  }

  // InicializaciÃ³n al cargar la pÃ¡gina
  window.onload = () => {
    translateUI();
    loadCountries();
  };
</script>
  </script>
</body>
</html>
